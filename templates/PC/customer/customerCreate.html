{% extends 'PC/base/baseForm.html' %}
{% load staticfiles %}
{% block title %}创建客户信息{% endblock %}
{% block body-title %}创建客户信息{% endblock %}
{% block style %}
    <style>
        .pure-form-aligned .pure-control-group label {
            width: 7em;
        }

        @media screen and (min-width: 768px) {
            textarea {
                height: 20em;
            }
        }
    </style>
{% endblock %}
{% block form %}
    <div class="pure-g">
        <div class="pure-u-1 pure-u-xl-1-2">
            <div class="pure-control-group">
                <label for="name">客户名称</label>
                <input type="text" id="name" name="name" value="" placeholder="请输入客户名称" required maxlength="50"/>
            </div>
            <div class="pure-control-group">
                <label for="project_name">项目名称</label>
                <input type="text" id="project_name" name="project_name" value="" placeholder="请输入项目名称" required
                       maxlength="50"/>
            </div>
            <div class="pure-control-group">
                <label for="project_date">项目签订时间</label>
                <input type="date" id="project_date" name="project_date" value="" required/>
            </div>
            <div class="pure-control-group">
                <label for="user_id">项目签订时间</label>
                <select id="user_id" name="user_id" required>
                    {% for user in user_list %}
                        <option value="{{ user.user_id }}">{{ user.user_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="pure-control-group">
                <label for="contact">联系人</label>
                <input type="text" id="contact" name="contact" value="" placeholder="请输入联系人" required maxlength="20"/>
            </div>
            <div class="pure-control-group">
                <label for="tel">联系方式</label>
                <input type="text" id="tel" name="tel" value="" placeholder="请输入联系方式" required maxlength="20"/>
            </div>
            <div class="pure-control-group">
                <label for="project_amount">项目金额</label>
                <input type="text" id="project_amount" name="project_amount" value="" placeholder="项目金额" maxlength="20"
                       required/>
            </div>
            <div class="pure-control-group">
                <label for="payment_method">付款方式</label>
                <input type="text" id="payment_method" name="payment_method" value="" placeholder="付款方式" maxlength="20"
                       required/>
            </div>
        </div>
        <div class="pure-u-1 pure-u-xl-1-2">
            <div class="pure-control-group">
                <label for="mark">项目技术要求或主要条款</label>
                <textarea id="mark" name="mark" placeholder="请输入项目技术要求或主要条款（1000字以内）" maxlength="1000"
                          required></textarea>
            </div>
        </div>
    </div>
    {#<div class="pure-control-group">#}
    {#    <label for="code">验证码</label>#}
    {#    <input type="text" name="code" id="code" value="" placeholder="验证码" maxlength="4" minlength="4" required style="width: calc(17em - 100px - 5px)"/>#}
    {#    <img class="code" onclick="refreshSrc()"/>#}
    {#</div>#}
{% endblock %}
{% block button-text %}
    <i class="iconfont icon-wancheng"></i> 创建
{% endblock %}
{#{% block script %}#}
{#<script>#}
{#$(document).ready(function () {#}
{#    let error = $('.error');#}
{#    let login_button = $('.form-button');#}
{#    login_button.click(function () {#}
{#        login_button.html('<i class="iconfont icon-jiazai"></i> 请稍后...').attr('disabled', 'disabled');  // 改变button中的文字#}
{#        if (NoEmpty('<i class="iconfont icon-wancheng"></i> 创建', error, login_button)){#}
{#            $.ajax({#}
{#                url: "{% url 'BPlan:customer_create_add' %}",#}
{#                type: 'POST',#}
{#                data: {#}
{#                    'name': $('#name').val(),#}
{#                    'contact':$('#contact').val(),#}
{#                    'tel':$('#tel').val(),#}
{#                    'project_name':$('#project_name').val(),#}
{#                    'project_date':$('#project_date').val(),#}
{#                    'project_amount':$('#project_amount').val(),#}
{#                    'payment_method':$('#payment_method').val(),#}
{#                    'mark':$('#mark').val(),#}
{#                    "csrfmiddlewaretoken":$("[name='csrfmiddlewaretoken']").val(),#}
{#                },#}
{#                success: function (result) {#}
{#                    if (result === 'success') {#}
{#                        error.text("");#}
{#                        $("form").hide(1000);#}
{#                        $(".body-title").html("<i class=\"iconfont icon-wancheng\"></i> 创建成功");#}
{#                        return 1;#}
{#                    }#}
{#                },#}
{#            })#}
{#        }#}
{##}
{#    })#}
{#})#}
{#</script>#}
{#{% endblock %}#}

